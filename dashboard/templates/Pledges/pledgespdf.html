<!doctype html>
<html>
<head>
    {% load humanize %}
    <meta charset="utf-8">
    <title>Monthly Pledges Report</title>
    <style type="text/css">
        @page {
            size: A4;
            margin: 1cm;
        }
        .table {

            width: 100%;
            max-width: 100%;
            background-color: #fff;
            border: black solid 1px;
            padding: 5px;

        }
   
        .table thead th {
            vertical-align: bottom;
            border-bottom: 2px solid #000;
        }
        .table tbody + tbody {

            border-top: 0px solid #000;
            padding: 25px;
        }
        .table .table {
            background-color: #fff;
        }
        .list-group {
            display: block;
            width: 100%;
            list-style: none;
            margin-top: 15px;
            margin-bottom: 15px;
        }
        .list-group p {
            width: 100%;
            height: 20px;
            line-height: 20px;
            list-style: none;
            font-size: 1.1em;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <div class="card-header">
            <h3>Generated on - {{ today | date:"d/m/Y" }}</h3>
        </div>
         <div align="center" style="font-size: large">
                   <b>UCC - BWAISE </b><br>
                 +256701614086<br>
                 Nabweru, Kampala Rd<br>
               uccbwaise1@gmail.com<br>
         </div >
        <div class="list-group">
            <h2 style="align-content:center">Pledges Report as of {{ today }}</h2>
        </div>

        <table class="sum_table table">
            <thead>
            <tr style="font-size:larger">
                <th>Date</th>
                <th>Name</th>
                <th>Reason</th>
                <th>Amount Pledged</th>
                <th>Amount Paid</th>
                <th>Balance</th>
            </tr>
            </thead>
            <tbody>
            {% for ex in ple %}
               {% if ex.Amount_Pledged is not 0 %}
                    <tr style="font-size:larger">
                        <td>{{ ex.Date}}</td>
                        <td>{% if ex.Pledge_Made_By_Visitor %}{{ex.Pledge_Made_By_Visitor}} {% else %}{{ ex.Pledge_Made_By}}</td>
                        {% endif %}<td>{{ ex.Reason}}</td>
                        <td>{{ ex.Amount_Pledged|intcomma}}</td>
                        <td>{{ ex.Amount_Paid|intcomma}}</td>
                        <td>{{ ex.Pledge_Balance|intcomma}}</td>
                    </tr>
                {% endif %}
            {% endfor %}
              <tr>
                  <td class="jumbotron"><h3>TOTAL</h3></td>
                  <td class="jumbotron"><h3>----------------------</h3></td>
                  <td class="jumbotron"><h3>----------------------</h3></td>
                  <td class="jumbotron"><h3>----------------------</h3></td>
                  <td class="jumbotron"><h3>Shs. {{ totalexpense|intcomma }}</h3></td>
                  <td class="jumbotron"><h3>Shs. {{ balance|intcomma }}</h3></td>
              </tr>
            </tbody>
        </table>
    </div>
</div>
<script type="text/javascript">
      var total = 0;
    $('.sum_table tr td.rowDataSd').each(function() {
        total += parseInt($(this).text());
    });
    $('.sum_table span.totalCol').text("Total Amount: Shs." + total );
</script>
</body>
</html>
